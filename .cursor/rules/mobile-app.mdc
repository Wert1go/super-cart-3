# Cursor Rule: Mobile App Modeling and Web-Based iOS Replica Layout

## Scope
This rule applies to all files where a mobile application UI is implemented or simulated in the web environment, with the goal of replicating an iOS mobile app layout and behavior.

## Purpose
Ensure that mobile applications are modeled and implemented as constrained iOS-style apps, not as responsive websites.
The resulting web implementation must behave as a visual and structural replica of a real iOS application.

## Core Principles
- A mobile app is a **bounded viewport**, not a fluid web canvas
- Web rendering is used as a **simulation medium**, not as a design target
- Layout decisions must follow **mobile app mental models**, not web page conventions

---

## Device Frame & Scaling

### Fixed Viewport Dimensions
- Always use concrete device dimensions (e.g., iPhone 14: 428×926px)
- The viewport MUST have fixed width and height
- Apply realistic device frame styling:
  - `border-radius: 55px` for modern iPhones
  - `box-shadow` for depth and device bezel simulation

### Scaling for Desktop Viewing
- When the device needs to appear larger for desktop viewing, use a **single scale factor at the root level**
- **Use `zoom` property, NOT `transform: scale()`**
  - `zoom` affects layout flow correctly
  - `transform: scale()` does NOT affect layout flow and causes clipping/positioning issues
- Apply scaling to a wrapper element around the device frame
- Recommended scale factor: 1.5–2.0 depending on target screen

### Centering & Positioning
- Center the device horizontally using flexbox on body
- Allow body to scroll vertically if scaled device exceeds viewport height
- Use `align-items: flex-start` to anchor device to top

---

## Layout Structure (Critical)

### Three-Layer Architecture
Every iOS replica MUST follow this structure:

1. **Fixed Top Layer** (does NOT scroll)
   - Safe area top
   - Status bar (time, signal, battery)
   - Navigation header (title, actions)

2. **Scrollable Content Layer** (scrolls internally)
   - All screen-specific content
   - Cards, lists, sections
   - Recommendations, forms, etc.

3. **Fixed Bottom Layer** (does NOT scroll)
   - Primary CTA button (checkout, submit, etc.)
   - Tab bar navigation
   - Safe area bottom

### Scroll Behavior
- The `content-area` is the ONLY scrollable container
- Use `-webkit-overflow-scrolling: touch` for native feel
- Hide scrollbar visually: `scrollbar-width: none`
- Browser page itself should NOT be the primary scroll container

---

## iOS Visual Language

### Colors (iOS System Palette)
- Background: `#f8f8f8` (systemGray6)
- Card background: `#ffffff`
- Separator: `#e5e5ea` (systemGray5)
- Secondary text: `#8e8e93` (systemGray)
- Primary accent: context-dependent (e.g., `#34c759` for success)

### Typography Hierarchy
- **Primary** (headings, key info): 22–28px, font-weight: 700
- **Secondary** (content, names): 16–17px, font-weight: 500–600
- **Tertiary** (metadata, hints): 13–15px, font-weight: 400, color: #8e8e93
- Use negative letter-spacing for headings: `letter-spacing: -0.4px`

### Spacing & Sections
- Section cards: `border-radius: 16px`, `margin: 0 20px 12px`
- Internal padding: `16–20px`
- Clear visual separation between sections using background color contrast

### Touch Targets
- Minimum touch target: 44×44px
- Buttons should have padding for comfortable tapping
- Use `:active` states for touch feedback

---

## Component Patterns

### Navigation Header
- Height: ~56px
- Title centered
- Actions positioned absolute to the right
- Background matches safe area (usually #f8f8f8)

### Primary CTA Button
- Full width minus margins
- Height: 50–56px
- Prominent background (gradient or solid accent color)
- Box-shadow for elevation
- Positioned in fixed bottom layer, NOT inside scrollable content

### Tab Bar
- Height: ~83px (including padding)
- 3–5 items, evenly distributed
- Icons: 26–28px
- Badge: red circle with white text
- Border-top separator

### List Items / Cards
- Image + text + controls layout
- Clear gap between elements (16px)
- Separator lines for list items (with left indent)

---

## Safe Areas

### Top Safe Area
- Height: ~59px (for notch/Dynamic Island)
- Background: same as status bar

### Bottom Safe Area
- Height: ~34px (for home indicator)
- Background: same as tab bar

---

## Mandatory Layout Constraints
- Never stretch to full browser width or height
- Horizontal scrolling is NOT allowed unless explicitly designed
- Content must never visually collide with system areas
- Do not introduce responsive breakpoints
- Do not optimize for large screens

---

## Examples (MANDATORY)

### Device Scaling

Good:
```css
.device-scale-wrapper {
  zoom: 1.8;
  -moz-transform: scale(1.8);
  -moz-transform-origin: top center;
}
```

Bad:
```css
.device-scale-wrapper {
  transform: scale(1.8);
  transform-origin: top center;
}
/* This breaks layout flow and causes clipping */
```

### Layout Structure

Good:
```jsx
<div className="app-viewport">
  {/* Fixed Top */}
  <SafeAreaTop />
  <StatusBar />
  <Header />
  
  {/* Scrollable Content */}
  <div className="content-area">
    <StoreSelector />
    <DeliverySummary />
    <CartItems />
    <Recommendations />
  </div>
  
  {/* Fixed Bottom */}
  <CheckoutBlock />
  <TabBar />
  <SafeAreaBottom />
</div>
```

Bad:
```jsx
<div className="app-viewport">
  <div className="content-area">
    <Header />           {/* Header inside scroll - WRONG */}
    <CartItems />
    <CheckoutBlock />    {/* CTA inside scroll - WRONG */}
    <TabBar />           {/* Tab bar inside scroll - WRONG */}
  </div>
</div>
```

### Body Centering

Good:
```css
body {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100%;
  padding: 40px 20px;
}
```

Bad:
```css
body {
  overflow: hidden;      /* Prevents scrolling to see full device */
  align-items: center;   /* Cuts off top of device */
}
```

### Typography

Good:
```css
.delivery-time-price {
  font-size: 28px;
  font-weight: 700;
  color: #000000;
  letter-spacing: -0.5px;
}

.metadata {
  font-size: 15px;
  color: #8e8e93;
}
```

Bad:
```css
.delivery-time-price {
  font-size: 28px;
  font-weight: 400;      /* Too light for primary info */
  color: #666666;        /* Not enough contrast */
}
```

---

## Constraints
- Do not redesign UI to "fit the web better"
- Do not allow layouts to expand infinitely with screen size
- Do not mix desktop and mobile navigation patterns
- Do not use `transform: scale()` for device scaling — use `zoom`
- If a layout decision conflicts between web convenience and mobile correctness, choose mobile correctness
